<login-page>
<div class="container padding-0">
    <div class="row">
        <div class="column">
            <form onsubmit="{onLogInClick}">
                <fieldset>
                    <label for="login" class="label-inline">Login</label>
                    <input type="text" id="login" name="login" placeholder="Enter your login">
                    <label for="password" class="label-inline">Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password">
                    <input type="submit" value="Log In" id="login-button" class="button-primary" />
                </fieldset>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="column">
            <p>Doesn't have account? <a href="/sign_up">Sign Up</a></p>
        </div>
    </div>
</div>
<script lang="js">
    import AuthHelper from '../auth-helper.js';
    import { router } from "@riotjs/route";

    async function onLogInClick(e) {
        e.preventDefault();

        const login = document.getElementById("login").value;
        const password = document.getElementById("password").value;

        try {
            let resp_json = await AuthHelper.loginByPassword(login, password);
            if (resp_json && resp_json["access_token"]) {
                router.push("/");
            }
        } catch (error) {
            console.log('Access Token error: ', error.message);
        }

        return false;
    }

    this.onLogInClick = onLogInClick;

</script>
</login-page>